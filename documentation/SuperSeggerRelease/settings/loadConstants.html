<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of loadConstants</title>
  <meta name="keywords" content="loadConstants">
  <meta name="description" content="loadConstants loads the parameters for the superSegger/trackOpti package.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">SuperSeggerRelease</a> &gt; <a href="index.html">settings</a> &gt; loadConstants.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for SuperSeggerRelease/settings&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>loadConstants
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>loadConstants loads the parameters for the superSegger/trackOpti package.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function CONST = loadConstants( res, PARALLEL_FLAG ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> loadConstants loads the parameters for the superSegger/trackOpti package.
 If you want to customize the constants DO NOT CHANGE
 THIS FILE! Rename this file loadConstantsMine.m and
 put in somehwere in the path.
 That file will load automatically rather than this one.
 When you make loadConstantsMine.m, change
 disp( 'loadConstants: Initializing.')
 to loadConstantsMine to avoid confusion.

 INPUT :
   res :
   PARALLEL_FLAG : 1 if you want to use parallel computation
                   0 for single core computation

 Copyright (C) 2016 Wiggins Lab
 University of Washington, 2016
 This file is part of SuperSeggerOpti.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function CONST = loadConstants( res, PARALLEL_FLAG )</a>
0002 <span class="comment">% loadConstants loads the parameters for the superSegger/trackOpti package.</span>
0003 <span class="comment">% If you want to customize the constants DO NOT CHANGE</span>
0004 <span class="comment">% THIS FILE! Rename this file loadConstantsMine.m and</span>
0005 <span class="comment">% put in somehwere in the path.</span>
0006 <span class="comment">% That file will load automatically rather than this one.</span>
0007 <span class="comment">% When you make loadConstantsMine.m, change</span>
0008 <span class="comment">% disp( 'loadConstants: Initializing.')</span>
0009 <span class="comment">% to loadConstantsMine to avoid confusion.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% INPUT :</span>
0012 <span class="comment">%   res :</span>
0013 <span class="comment">%   PARALLEL_FLAG : 1 if you want to use parallel computation</span>
0014 <span class="comment">%                   0 for single core computation</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% Copyright (C) 2016 Wiggins Lab</span>
0017 <span class="comment">% University of Washington, 2016</span>
0018 <span class="comment">% This file is part of SuperSeggerOpti.</span>
0019 
0020 <span class="keyword">if</span> nargin &lt; 1 || isempty( res )
0021     res = 60;
0022 <span class="keyword">end</span>
0023 
0024 <span class="keyword">if</span> ~exist(<span class="string">'PARALLEL_FLAG'</span>,<span class="string">'var'</span>) || isempty( PARALLEL_FLAG )
0025     PARALLEL_FLAG = true;
0026 <span class="keyword">end</span>
0027 
0028 
0029 disp( <span class="string">'loadConstants: Initializing.'</span>);
0030 
0031 <span class="comment">% Octoscope setting</span>
0032 CONST.imAlign.DAPI    = [-0.0354   -0.0000    1.5500   -0.3900];
0033 CONST.imAlign.mCherry = [-0.0512   -0.0000   -1.1500    1.0000];
0034 CONST.imAlign.GFP     = [ 0.0000    0.0000    0.0000    0.0000];
0035 
0036 CONST.imAlign.out = {CONST.imAlign.GFP, <span class="keyword">...</span><span class="comment">    % c1 channel name</span>
0037     CONST.imAlign.GFP,<span class="keyword">...</span><span class="comment">  % c2 channel name</span>
0038     CONST.imAlign.GFP};        <span class="comment">% c3 channel name</span>
0039 
0040 
0041 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0042 <span class="comment">%                                                                         %</span>
0043 <span class="comment">% Take care of matlab pool. If a pool of workers doesn't exist, open it   %</span>
0044 <span class="comment">% up. This is for parallel processing on multiple cores.                  %</span>
0045 <span class="comment">%                                                                         %</span>
0046 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0047 
0048 <span class="comment">%PARALLEL_FLAG = 0;</span>
0049 
0050 <span class="comment">%splash_im = imread('splash.tif');</span>
0051 <span class="comment">%h = figure();</span>
0052 <span class="comment">%try</span>
0053 <span class="comment">%imshow( splash_im );</span>
0054 <span class="comment">%end</span>
0055 
0056 <span class="comment">% PARALLEL FOR MATLAB 2015</span>
0057 <span class="keyword">if</span> PARALLEL_FLAG
0058     poolobj = gcp(<span class="string">'nocreate'</span>); <span class="comment">% If no pool, do not create new one.</span>
0059     <span class="keyword">if</span> isempty(poolobj)
0060         poolobj = parpool(<span class="string">'local'</span>)
0061     <span class="keyword">end</span>
0062     CONST.parallel_pool_num = poolobj.NumWorkers
0063 <span class="keyword">else</span>
0064     CONST.parallel_pool_num = 0;
0065 <span class="keyword">end</span>
0066 
0067 CONST.xy_parallel = 0;
0068 CONST.PARALLEL_FLAG = PARALLEL_FLAG;
0069 CONST.show_status   = ~(CONST.parallel_pool_num);
0070 
0071 <span class="comment">% PARALLEL FOR MATLAB 2014</span>
0072 <span class="comment">% if PARALLEL_FLAG</span>
0073 <span class="comment">%     if exist( 'matlabpool', 'file' )</span>
0074 <span class="comment">%         CONST.parallel_pool_num = matlabpool('size');</span>
0075 <span class="comment">%         if ( CONST.parallel_pool_num == 0 )</span>
0076 <span class="comment">%             matlabpool</span>
0077 <span class="comment">%             try</span>
0078 <span class="comment">%                 CONST.parallel_pool_num =  matlabpool('size');</span>
0079 <span class="comment">%             catch</span>
0080 <span class="comment">%                 distcomp.feature('LocalUseMpiexec',false)</span>
0081 <span class="comment">%                 CONST.parallel_pool_num =  matlabpool('size');</span>
0082 <span class="comment">%             end</span>
0083 <span class="comment">%             disp( ['loadConstants: Parallel processing pool opened. Size ', num2str(CONST.parallel_pool_num),'.' ] );</span>
0084 <span class="comment">%</span>
0085 <span class="comment">%         else</span>
0086 <span class="comment">%             disp( ['loadConstants: Parallel processing pool already open. Size ', num2str( CONST.parallel_pool_num),'.']);</span>
0087 <span class="comment">%         end</span>
0088 <span class="comment">%     else</span>
0089 <span class="comment">%         disp( 'loadConstants: Attempted to open matlab pool, but no parallel processing toolbox.' );</span>
0090 <span class="comment">%         CONST.parallel_pool_num = 0;</span>
0091 <span class="comment">%     end</span>
0092 <span class="comment">% else</span>
0093 <span class="comment">%     CONST.parallel_pool_num = 0;</span>
0094 <span class="comment">%     %pause( 2 );</span>
0095 <span class="comment">% end</span>
0096 <span class="comment">%</span>
0097 <span class="comment">%</span>
0098 <span class="comment">%</span>
0099 <span class="comment">%</span>
0100 <span class="comment">% CONST.PARALLEL_FLAG = PARALLEL_FLAG;</span>
0101 <span class="comment">% CONST.show_status   = ~(CONST.parallel_pool_num);</span>
0102 
0103 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0104 <span class="comment">%                                                                         %</span>
0105 <span class="comment">% Specify scope resolution here                                           %</span>
0106 <span class="comment">%                                                                         %</span>
0107 <span class="comment">% Set the res flag to apply to your exp.                                  %</span>
0108 <span class="comment">%                                                                         %</span>
0109 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0110 
0111 
0112 <span class="comment">% Values for setting res</span>
0113 <span class="comment">%</span>
0114 <span class="comment">% '100XPa': loadConstants 100X Pseudomonas</span>
0115 <span class="comment">% '60XEc' : loadConstants 60X Ecoli</span>
0116 <span class="comment">% '100XEc': loadConstants 100X Ecoli</span>
0117 
0118 R100X    = 1; <span class="comment">% for 100X unbinned, 6 um pixels</span>
0119 R100XB   = 2; <span class="comment">% for 100X 2x2 binned, 6 um pixels</span>
0120 R60X     = 3; <span class="comment">% for 60X, 6 um pixels</span>
0121 R100XPa  = 4; <span class="comment">% for 100X, Pseudomonas</span>
0122 R60XPa   = 5; <span class="comment">% for 60X, Pseudomonas</span>
0123 R60XEcHR = 6; <span class="comment">% for 60X, coli slow high density.</span>
0124 R60XEcLB = 7; <span class="comment">% for 60X, coli slow high density.</span>
0125 R60XA    = 8; <span class="comment">% for 60X, coli ASKA</span>
0126 R60XPaM  = 9; <span class="comment">% for 60X, Pseudomonas Minimal</span>
0127 R60XPaM2 = 10; <span class="comment">% for 60X, Pseudomonas Minimal</span>
0128 R60XBthai = 11;
0129 
0130 CONST.R100X    = R100X;
0131 CONST.R100XB   = R100XB;
0132 CONST.R60X     = R60X;
0133 CONST.R100XPa  = R100XPa;
0134 CONST.R60XPa   = R60XPa;
0135 CONST.R60XEcHR = R60XEcHR;
0136 CONST.R60XEcLB = R60XEcLB;
0137 CONST.R60XA    = R60XA;
0138 CONST.R60XPaM  = R60XPaM;
0139 CONST.R60XPaM2 = R60XPaM2;
0140 CONST.R60XPaM2 = R60XBthai;
0141 
0142 
0143 
0144 cl = class(res);
0145 
0146 <span class="keyword">if</span> strcmp(cl,<span class="string">'double'</span> )
0147     
0148     <span class="keyword">if</span> res == 60
0149         disp(<span class="string">'loadConstants: 60X'</span>);
0150         ResFlag = R60X;
0151     <span class="keyword">else</span>
0152         disp(<span class="string">'loadConstants:  100X'</span>);
0153         ResFlag = R100X;
0154     <span class="keyword">end</span>
0155 <span class="keyword">elseif</span> strcmp(cl, <span class="string">'char'</span> );
0156     <span class="keyword">if</span> strcmp(res,<span class="string">'100XPa'</span>);
0157         disp(<span class="string">'loadConstants:  100X Pseudomonas'</span>);
0158         ResFlag = R100XPa;
0159     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XEc'</span>)
0160         disp(<span class="string">'loadConstants:  60X Ecoli'</span>);
0161         ResFlag = R60X;
0162      <span class="keyword">elseif</span> strcmp(res,<span class="string">'100XEc'</span>)
0163         disp(<span class="string">'loadConstants:  100X Ecoli'</span>);
0164         ResFlag = R100X;
0165     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XPa'</span>)
0166         disp(<span class="string">'loadConstants:  60X Pseudomonas'</span>);
0167         ResFlag = R60XPa;
0168     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XEcHR'</span>)
0169         disp(<span class="string">'loadConstants:  60X Ecoli Highres'</span>);
0170         ResFlag = R60XEcHR;
0171     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XA'</span>)
0172         disp(<span class="string">'loadConstants:  60X ASKA'</span>);
0173         ResFlag = R60XA;
0174     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XEcLB'</span>)
0175         disp(<span class="string">'loadConstants:  60X Ecoli LB'</span>);
0176         ResFlag = R60XEcLB;
0177     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XPaM'</span>)
0178         disp(<span class="string">'loadConstants:  60X Pseudomonas Minimal'</span>);
0179         ResFlag = R60XPaM;
0180     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XPaM2'</span>)
0181         disp(<span class="string">'loadConstants:  60X Pseudomonas Minimal 2'</span>);
0182         ResFlag = R60XPaM2;
0183     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XBthai'</span>)
0184         disp(<span class="string">'loadConstants:  60X B Thai'</span>);
0185         ResFlag = R60XBthai;
0186     <span class="keyword">else</span>
0187         disp(<span class="string">' No match found - loading default : loadConstants:  60X Ecoli'</span>);
0188         ResFlag = R60X;
0189     <span class="keyword">end</span>
0190 <span class="keyword">else</span>
0191     disp(<span class="string">' No match found - loading default : loadConstants:  60X Ecoli'</span>);
0192     ResFlag = R60X;
0193 <span class="keyword">end</span>
0194 
0195 
0196 CONST.ResFlag = ResFlag;
0197 CONST.align.CROP_FLAG  = false;
0198 CONST.align.ALIGN_FLAG = true;
0199 
0200 <span class="comment">%%</span>
0201 <span class="comment">% This is where the function pointer to the segmentation backend is set.</span>
0202 <span class="comment">% By changing this field you can change the segmentation backend of</span>
0203 <span class="comment">% BatchSuperSeggerOpti.</span>
0204 
0205 CONST.seg.segFun = @ssoSegFun;
0206 <span class="keyword">if</span> ResFlag == R60XPaM2
0207     CONST.seg.segFun = @ssoSegFunPa;
0208 <span class="keyword">end</span>
0209 
0210 <span class="comment">% optimize regions based on cell shape (slower)</span>
0211 CONST.seg.OPTI_FLAG = true;
0212 
0213 <span class="keyword">if</span> ResFlag == R60XPaM
0214     CONST.seg.OPTI_FLAG                = true;
0215 <span class="keyword">end</span>
0216 
0217 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0218 <span class="comment">%                                                                         %</span>
0219 <span class="comment">% Parameters used for segmentation by superSeggerOpti                     %</span>
0220 <span class="comment">%                                                                         %</span>
0221 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0222 
0223 <span class="comment">% This is the minimum area of cells/cell clumps in the creation of the</span>
0224 <span class="comment">% background mask.</span>
0225 CONST.superSeggerOpti.MIN_BG_AREA = 150;
0226 <span class="comment">%CONST.superSeggerOpti.MIN_BG_AREA = 20;</span>
0227 
0228 <span class="comment">% set a max number of segs so that the code does die when doing bi batch</span>
0229 <span class="comment">% jobs.</span>
0230 CONST.superSeggerOpti.MAX_SEG_NUM = 10000;
0231 
0232 <span class="comment">% These constants are used in generating the cell clump mask.</span>
0233 CONST.superSeggerOpti.THRESH1  =   50;
0234 CONST.superSeggerOpti.THRESH2  =    0;
0235 CONST.superSeggerOpti.Amax     = 5000;
0236 
0237 <span class="comment">% Size in pixels of the structuring element in the contrast-enhancing filter. It</span>
0238 <span class="comment">% should be proportional to the width of a cell.</span>
0239 <span class="keyword">if</span> ResFlag == R60X
0240     <span class="comment">%CONST.superSeggerOpti.MAGIC_RADIUS =  5;</span>
0241     <span class="comment">%CONST.superSeggerOpti.CUT_INT      = 70;</span>
0242     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0243     CONST.superSeggerOpti.CUT_INT      = 70;
0244     CONST.superSeggerOpti.Amax         = 1000;
0245     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0246 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0247     CONST.superSeggerOpti.MAGIC_RADIUS =  5;
0248     CONST.superSeggerOpti.CUT_INT      = 70;
0249 <span class="keyword">elseif</span> ResFlag == R60XPa
0250     CONST.superSeggerOpti.MAGIC_RADIUS =  5;
0251     CONST.superSeggerOpti.CUT_INT      = 100;
0252 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0253     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0254     CONST.superSeggerOpti.CUT_INT      = 70;
0255 <span class="keyword">elseif</span> ResFlag == R100X
0256     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0257     CONST.superSeggerOpti.CUT_INT      = 50;
0258 <span class="keyword">elseif</span> ResFlag == R100XPa
0259     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0260     CONST.superSeggerOpti.CUT_INT      = 50;
0261     CONST.superSeggerOpti.MAX_SEG_NUM = 10000000;
0262     
0263 <span class="keyword">elseif</span> ResFlag == R60XA
0264     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0265     CONST.superSeggerOpti.CUT_INT      = 50;
0266     CONST.superSeggerOpti.Amax         = 80;
0267     <span class="comment">%CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;</span>
0268 <span class="keyword">elseif</span> (ResFlag == R60XPaM)
0269     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0270     CONST.superSeggerOpti.CUT_INT      = 50;
0271     CONST.superSeggerOpti.Amax         = 80;
0272     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0273 <span class="keyword">elseif</span> (ResFlag == R60XPaM2)
0274     CONST.superSeggerOpti.MAGIC_RADIUS =  3;
0275     CONST.superSeggerOpti.CUT_INT      = 50;
0276     CONST.superSeggerOpti.Amax         = 80;
0277     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0278     CONST.superSeggerOpti.MIN_BG_AREA = 30;
0279 <span class="keyword">elseif</span> (ResFlag == R60XBthai)
0280     CONST.superSeggerOpti.MAGIC_RADIUS =  3;
0281     CONST.superSeggerOpti.CUT_INT      = 50;
0282     CONST.superSeggerOpti.Amax         = 150;
0283     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0284     CONST.superSeggerOpti.MIN_BG_AREA  = 30;
0285     CONST.superSeggerOpti.THRESH1      = 85;
0286     CONST.superSeggerOpti.THRESH2      = 40;
0287 <span class="keyword">end</span>
0288 
0289 <span class="comment">% Intensity threshold for output of the contrast enhancement. it should be</span>
0290 <span class="comment">% a number close to zero. Intensities below it are set to zero.</span>
0291 CONST.superSeggerOpti.MAGIC_THRESHOLD = 5;
0292 
0293 <span class="comment">% Intensity threshold to define good segments. Segments which intersect a</span>
0294 <span class="comment">% pixel whose intensity is lower than this number are bad segments.</span>
0295 CONST.superSeggerOpti.MIN_THRESHOLD = 10;
0296 
0297 <span class="comment">% Another intensity threshold to define good segments. If the mean</span>
0298 <span class="comment">% intensity of all pixels intersected by a segment is less than this</span>
0299 <span class="comment">% number, the segment is bad.</span>
0300 CONST.superSeggerOpti.MEAN_THRESHOLD = 18;
0301 
0302 <span class="comment">% Width in pixels of the gaussian used to smooth the raw phase image. It</span>
0303 <span class="comment">% should be on the order of a pixel.</span>
0304 <span class="comment">% if ResFlag == R60X</span>
0305 <span class="comment">%     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/8;</span>
0306 <span class="comment">% elseif ResFlag == R100X</span>
0307 <span class="comment">%     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/4;</span>
0308 <span class="comment">% elseif ResFlag == R100XPa</span>
0309 <span class="comment">%     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/4;</span>
0310 <span class="comment">% end</span>
0311 <span class="keyword">if</span> ResFlag == R60X
0312     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0313 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0314     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/2;
0315 <span class="keyword">elseif</span> ResFlag == R100X
0316     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0317 <span class="keyword">elseif</span> ResFlag == R100XPa
0318     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0319 <span class="keyword">elseif</span> ResFlag == R60XA
0320     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0321 <span class="keyword">elseif</span> ResFlag == R60XPaM
0322     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0323 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0324     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0325 <span class="keyword">elseif</span> ResFlag == R60XBthai
0326     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0327 <span class="keyword">elseif</span> ResFlag == R60XPa
0328     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0329 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0330     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0331 <span class="keyword">end</span>
0332 
0333 <span class="comment">% MAX_WIDTH</span>
0334 <span class="comment">% Width threshold for the iterative segment refinement. Masked regions</span>
0335 <span class="comment">% whose minor axis is greater than this number are considered for further</span>
0336 <span class="comment">% segmentation. All other masked regions are assumed to correctly define</span>
0337 <span class="comment">% a cell.</span>
0338 <span class="keyword">if</span> ResFlag == R60X
0339     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 10;</span>
0340     CONST.superSeggerOpti.MAX_WIDTH = 10;
0341     CONST.superSeggerOpti.crop_rad  =  2;
0342 <span class="keyword">elseif</span> ResFlag == R100X
0343     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0344     CONST.superSeggerOpti.MAX_WIDTH = 20;
0345     CONST.superSeggerOpti.crop_rad  =  2;
0346 <span class="keyword">elseif</span> ResFlag == R100XPa
0347     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0348     CONST.superSeggerOpti.MAX_WIDTH = 20;
0349     CONST.superSeggerOpti.crop_rad  =  2;
0350 <span class="keyword">elseif</span> ResFlag == R60XA
0351     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0352     CONST.superSeggerOpti.MAX_WIDTH = 20;
0353     CONST.superSeggerOpti.crop_rad  =  2;
0354 <span class="keyword">elseif</span> ResFlag == R60XPaM
0355     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0356     CONST.superSeggerOpti.MAX_WIDTH = 10;
0357     CONST.superSeggerOpti.crop_rad  =  2;
0358 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0359     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0360     CONST.superSeggerOpti.MAX_WIDTH = 10;
0361     CONST.superSeggerOpti.crop_rad  =  2;
0362 <span class="keyword">elseif</span> ResFlag == R60XBthai
0363     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0364     CONST.superSeggerOpti.MAX_WIDTH = 10;
0365     CONST.superSeggerOpti.crop_rad  =  2;
0366 <span class="keyword">elseif</span> ResFlag == R60XPa
0367     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0368     CONST.superSeggerOpti.MAX_WIDTH = 10;
0369     CONST.superSeggerOpti.crop_rad  =  2;
0370 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0371     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0372     CONST.superSeggerOpti.MAX_WIDTH = 20;
0373     CONST.superSeggerOpti.crop_rad  =  2;
0374 <span class="keyword">end</span>
0375 
0376 
0377 <span class="comment">% A is the vector used to generate the segment score.</span>
0378 <span class="keyword">if</span> ResFlag == R60X
0379     tmp = load( <span class="string">'Ec60.mat'</span> );
0380 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0381     tmp = load( <span class="string">'Ec60.mat'</span> );
0382 <span class="keyword">elseif</span> ResFlag == R100X
0383     tmp = load( <span class="string">'Ec100X.mat'</span> );
0384 <span class="keyword">elseif</span> ResFlag == R100XPa
0385     tmp = load( <span class="string">'Pseud.mat'</span> );
0386 <span class="keyword">elseif</span> ResFlag == R60XA
0387     tmp = load( <span class="string">'Ec60XASKA.mat'</span> );
0388 <span class="keyword">elseif</span> ResFlag == R60XPaM
0389     tmp = load( <span class="string">'Pseud60Min.mat'</span> );
0390 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0391     tmp = load( <span class="string">'Pseud60Min.mat'</span> );
0392 <span class="keyword">elseif</span> ResFlag == R60XBthai
0393     tmp = load( <span class="string">'Bthai.mat'</span> );
0394     disp(<span class="string">'whammmm bammmm'</span> );
0395 <span class="keyword">elseif</span> ResFlag == R60XPa
0396     tmp = load( <span class="string">'Pseud60.mat'</span> );
0397 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0398     tmp = load( <span class="string">'Ec60XLB.mat'</span> );
0399 <span class="keyword">end</span>
0400 
0401 CONST.superSeggerOpti.A = tmp.A;
0402 CONST.superSeggerOpti.NUM_INFO = 19;
0403 
0404 
0405 
0406 
0407 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0408 <span class="comment">%                                                                         %</span>
0409 <span class="comment">% Constants for regionOpti                                                %</span>
0410 <span class="comment">%                                                                         %</span>
0411 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0412 
0413 <span class="comment">% MAX_NUM_RESOLVE is the max number of segments that regionOpti will try</span>
0414 <span class="comment">% to explore systematically (vs simulated anneal). With the current</span>
0415 <span class="comment">% incarnation of the code, the speed crossover is about 8.</span>
0416 CONST.regionOpti.MAX_NUM_RESOLVE    = 5000;
0417 CONST.regionOpti.MAX_NUM_SYSTEMATIC = 8;
0418 
0419 <span class="comment">% regionOpti explores turning on and off segments that have marginal</span>
0420 <span class="comment">% scores and tries to optimize the cell score computed by regionScoreFun--</span>
0421 <span class="comment">% constants below. Margninal is defined as</span>
0422 <span class="comment">% CutOffScoreHi &lt; scoreRaw &lt; CutOffScoreLo</span>
0423 CONST.regionOpti.CutOffScoreHi =  5;
0424 CONST.regionOpti.CutOffScoreLo = -5;
0425 CONST.regionOpti.Emax          = 1e2;
0426 CONST.regionOpti.fignum        = 1;
0427 CONST.regionOpti.dt            = 50;
0428 CONST.regionOpti.Nt            = 500;
0429 
0430 <span class="comment">% sutomatically length sim anneal period linearly with the number of</span>
0431 <span class="comment">% segments</span>
0432 CONST.regionOpti.ADJUST_FLAG   = true;
0433 
0434 <span class="comment">% For regionOpti, this is the minimum region size, below which neighbor</span>
0435 <span class="comment">% segements are switch on during optimization.</span>
0436 CONST.regionOpti.MAX_WIDTH  = CONST.superSeggerOpti.MAX_WIDTH;
0437 
0438 
0439 <span class="comment">% For regionOpti, this is the minimum region size, below which neighbor</span>
0440 <span class="comment">% segements are switch on during optimization.</span>
0441 <span class="keyword">if</span> ResFlag == R60X
0442     CONST.regionOpti.MAX_LENGTH  = 15;
0443 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0444     CONST.regionOpti.MAX_LENGTH  = 15;
0445 <span class="keyword">elseif</span> ResFlag == R100X
0446     CONST.regionOpti.MAX_LENGTH  = 25;
0447 <span class="keyword">elseif</span> ResFlag == R100XPa
0448     CONST.regionOpti.MAX_LENGTH  = 25;
0449 <span class="keyword">elseif</span> ResFlag == R60XA
0450     CONST.regionOpti.MAX_LENGTH  = 25;
0451 <span class="keyword">elseif</span> ResFlag == R60XPaM
0452     CONST.regionOpti.MAX_LENGTH  = 8;
0453 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0454     CONST.regionOpti.MAX_LENGTH  = 8;
0455 <span class="keyword">elseif</span> ResFlag == R60XBthai
0456     CONST.regionOpti.MAX_LENGTH  = 8;
0457 <span class="keyword">elseif</span> ResFlag == R60XPa
0458     CONST.regionOpti.MAX_LENGTH  = 10;
0459 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0460     CONST.regionOpti.MAX_LENGTH  = 25;
0461 <span class="keyword">end</span>
0462 
0463 <span class="comment">% To calculate the total score:</span>
0464 <span class="comment">% Score_Total = Score_Cell + DE_norm * ( -Score_SegOn + Score_SegOff )</span>
0465 <span class="comment">% DE_norm controls the relative importance of segment scores versus cell</span>
0466 <span class="comment">% scores.</span>
0467 CONST.regionOpti.DE_norm = 0.5;
0468 
0469 
0470 
0471 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0472 <span class="comment">%                                                                         %</span>
0473 <span class="comment">% Constants for regionScoreFun                                            %</span>
0474 <span class="comment">%                                                                         %</span>
0475 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0476 
0477 
0478 <span class="comment">% L20 is the optimal cell width</span>
0479 <span class="comment">% L10 is the lower soft cutoff of cell length</span>
0480 <span class="comment">% mu is a score constant.</span>
0481 <span class="comment">% E0 is the multiplier that sets the balance between cell width and cell</span>
0482 <span class="comment">% length.</span>
0483 <span class="keyword">if</span> ResFlag == R60X
0484     <span class="comment">%     CONST.regionScoreFun.E        = tmp.E;</span>
0485     <span class="comment">%     CONST.regionScoreFun.NUM_INFO = 19;</span>
0486     <span class="comment">%     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;</span>
0487     <span class="comment">%     CONST.regionScoreFun.props    = @cellprops4;</span>
0488     <span class="comment">%     CONST.regionScoreFun.names    = @getRegNames4;</span>
0489     CONST.regionScoreFun.NUM_INFO = 21;
0490     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0491     CONST.regionScoreFun.props    = @cellprops5;
0492     CONST.regionScoreFun.E        = tmp.E;
0493     CONST.regionScoreFun.names    = @getRegNames3;
0494 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0495     CONST.regionScoreFun.E        = tmp.E;
0496     CONST.regionScoreFun.NUM_INFO = 11;
0497     CONST.regionScoreFun.fun      = @regionScoreFun0;
0498     CONST.regionScoreFun.props    = @cellprops0;
0499 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0500     CONST.regionScoreFun.E        = tmp.E;
0501     <span class="comment">%    CONST.regionScoreFun.NUM_INFO = 21;</span>
0502     <span class="comment">%    CONST.regionScoreFun.fun      = @regionScoreFunMatrix;</span>
0503     <span class="comment">%    CONST.regionScoreFun.props    = @cellprops3;</span>
0504     CONST.regionScoreFun.NUM_INFO = 8;
0505     CONST.regionScoreFun.fun      = @regionScoreFunPseud2;
0506     CONST.regionScoreFun.props    = @cellpropsPseud;
0507 <span class="keyword">elseif</span> ResFlag == R100X
0508     CONST.regionScoreFun.E        = tmp.E;
0509     <span class="comment">%     CONST.regionScoreFun.NUM_INFO = 11;</span>
0510     <span class="comment">%     CONST.regionScoreFun.fun      = @regionScoreFun0;</span>
0511     <span class="comment">%     CONST.regionScoreFun.props    = @cellprops0;</span>
0512     CONST.regionScoreFun.NUM_INFO = 21;
0513     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0514     CONST.regionScoreFun.props    = @cellprops3;
0515     
0516 <span class="keyword">elseif</span> ResFlag == R100XPa
0517     CONST.regionScoreFun.E        = tmp.E;
0518     CONST.regionScoreFun.NUM_INFO = 8;
0519     CONST.regionScoreFun.fun      = @regionScoreFunPseud2;
0520     CONST.regionScoreFun.props    = @cellpropsPseud;
0521 <span class="keyword">elseif</span> ResFlag == R60XA
0522     CONST.regionScoreFun.E        = tmp.E;
0523     CONST.regionScoreFun.NUM_INFO = 21;
0524     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0525     CONST.regionScoreFun.props    = @cellprops3;
0526 <span class="keyword">elseif</span> ResFlag == R60XPaM
0527     CONST.regionScoreFun.E        = tmp.E;
0528     CONST.regionScoreFun.NUM_INFO = 21;
0529     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0530     CONST.regionScoreFun.props    = @cellprops3;
0531 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0532     CONST.regionScoreFun.E        = tmp.E;
0533     CONST.regionScoreFun.NUM_INFO = 21;
0534     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0535     CONST.regionScoreFun.props    = @cellprops3;
0536 <span class="keyword">elseif</span> ResFlag == R60XBthai
0537     CONST.regionScoreFun.E        = tmp.E;
0538     CONST.regionScoreFun.NUM_INFO = 21;
0539     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0540     CONST.regionScoreFun.props    = @cellprops3;
0541 <span class="keyword">elseif</span> ResFlag == R60XPa
0542     
0543     CONST.regionScoreFun.NUM_INFO = 21;
0544     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0545     CONST.regionScoreFun.props    = @cellprops3;
0546     CONST.regionScoreFun.E        = tmp.E;
0547     CONST.regionScoreFun.names    = @getRegNames3;
0548     
0549     <span class="comment">%     CONST.regionScoreFun.E        = tmp.E;</span>
0550     <span class="comment">%     CONST.regionScoreFun.NUM_INFO = 19;</span>
0551     <span class="comment">%     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;</span>
0552     <span class="comment">%     CONST.regionScoreFun.props    = @cellprops4;</span>
0553     <span class="comment">%     CONST.regionScoreFun.names    = @getRegNames4;</span>
0554 <span class="keyword">end</span>
0555 
0556 
0557 CONST.trackOpti.MIN_AREA = 12;
0558 
0559 
0560 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0561 <span class="comment">%                                                                         %</span>
0562 <span class="comment">% Constants for trackOpti                                                 %</span>
0563 <span class="comment">%                                                                         %</span>
0564 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0565 
0566 
0567 
0568 <span class="comment">% CONST.trackOpti.OVERLAP_LIMIT_MIN: defines what counts as an overlap</span>
0569 <span class="comment">%                                  : between frames</span>
0570 <span class="comment">% CONST.trackOpti.OVERLAP_LIMIT_MAX: no longer used.</span>
0571 <span class="comment">%</span>
0572 <span class="comment">% CONST.trackOpti.AREA_CHANGE_LIMIT: No longer used.</span>
0573 <span class="comment">%</span>
0574 <span class="comment">% CONST.trackOpti.dA_LIMIT_ErRes   : area ratio necessary for 1 to 1.</span>
0575 <span class="comment">% CONST.trackOpti.dA_LIMIT         : if min(A_1,A_2)/max(A_1,A_2) &lt; dA_Limit</span>
0576 <span class="comment">%                                  : set a mapping error</span>
0577 
0578 <span class="comment">% CONST.trackOpti.SCORE_LIMIT          : no longer used</span>
0579 <span class="comment">% CONST.trackOpti.SCORE_LIMIT_DAUGHTER : limiting score for daughter cell</span>
0580 <span class="comment">%                                      : on cell division</span>
0581 <span class="comment">% CONST.trackOpti.SCORE_LIMIT_MOTHER   : limiting score for mother cell</span>
0582 <span class="comment">%                                      : on cell division</span>
0583 
0584 <span class="comment">% THIS TURNS ON FUNCTIONALITY TO GUESS NEW AND OLD POLES IN RECENCTLY</span>
0585 <span class="comment">% DIVIDED CELLS IN A SNAPSHOT ANALYISIS</span>
0586 CONST.trackOpti.pole_flag             = 1 ;
0587 
0588 CONST.trackOpti.FSKIP_FLAG            = true;
0589 
0590 <span class="comment">% Mougous lab lysis detection off</span>
0591 CONST.trackOpti.LYSE_FLAG             = false;
0592 
0593 
0594 
0595 
0596 CONST.trackOpti.MERGED_FLAG     = true;
0597 CONST.trackOpti.HARDLINK_FLAG   = false;
0598 
0599 CONST.trackOpti.DA_MAX          =  0.2;
0600 CONST.trackOpti.DA_MIN          = -0.2;
0601 
0602 
0603 <span class="keyword">if</span> ResFlag == R100X
0604     CONST.trackOpti.REMOVE_STRAY      = 1;
0605     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0606     
0607     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0608     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0609     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0610     CONST.trackOpti.dA_LIMIT_ErRes    = 0.8;
0611     CONST.trackOpti.dA_LIMIT          = 0.7;
0612     
0613     
0614     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0615     
0616     CONST.trackOpti.SCORE_LIMIT       = -1;
0617     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -1;
0618     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -1;
0619     CONST.trackOpti.MIN_CELL_AGE      = 3;
0620     
0621 <span class="keyword">elseif</span> ResFlag == R60X
0622     CONST.trackOpti.REMOVE_STRAY      = 0;
0623     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0624     
0625     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0626     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0627     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0628     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0629     CONST.trackOpti.dA_LIMIT          = 0.7;
0630     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0631     
0632     CONST.trackOpti.SCORE_LIMIT       = -15;
0633     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0634     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0635     CONST.trackOpti.MIN_CELL_AGE      = 1;
0636     
0637 <span class="keyword">elseif</span> ResFlag == R100XPa
0638     CONST.trackOpti.REMOVE_STRAY      = 0;
0639     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0640     
0641     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0642     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0643     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0644     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0645     CONST.trackOpti.dA_LIMIT          = 0.7;
0646     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0647     
0648     CONST.trackOpti.SCORE_LIMIT       = -15;
0649     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0650     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0651     CONST.trackOpti.MIN_CELL_AGE      = 5;
0652 <span class="keyword">elseif</span> ResFlag == R60XA
0653     CONST.trackOpti.REMOVE_STRAY      = 0;
0654     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0655     
0656     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0657     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0658     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0659     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0660     CONST.trackOpti.dA_LIMIT          = 0.7;
0661     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0662     
0663     CONST.trackOpti.SCORE_LIMIT       = -15;
0664     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0665     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0666     CONST.trackOpti.MIN_CELL_AGE      = 5;
0667 <span class="keyword">elseif</span> ResFlag == R60XPaM
0668     CONST.trackOpti.REMOVE_STRAY      = 0;
0669     CONST.trackOpti.NEIGHBOR_FLAG     = true;
0670     
0671     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0672     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0673     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0674     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0675     CONST.trackOpti.dA_LIMIT          = 0.7;
0676     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0677     
0678     CONST.trackOpti.SCORE_LIMIT       = -15;
0679     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0680     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0681     CONST.trackOpti.MIN_CELL_AGE      = 5;
0682 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0683     CONST.trackOpti.REMOVE_STRAY      = 0;
0684     CONST.trackOpti.NEIGHBOR_FLAG     = true;
0685     
0686     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0687     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0688     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0689     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0690     CONST.trackOpti.dA_LIMIT          = 0.7;
0691     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0692     
0693     CONST.trackOpti.SCORE_LIMIT       = -15;
0694     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0695     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0696     CONST.trackOpti.MIN_CELL_AGE      = 5;
0697     
0698     CONST.trackOpti.LYSE_FLAG             = true;
0699     
0700     CONST.trackOpti.FLUOR1_CHANGE_MIN     = .2;
0701     CONST.trackOpti.FLUOR2_CHANGE_MIN     = .2;
0702     CONST.trackOpti.LSPHEREMIN            = 10;
0703     CONST.trackOpti.LSPHEREMAX            = 20;
0704     CONST.trackOpti.ECCENTRICITY          = .7;
0705 <span class="keyword">elseif</span> ResFlag == R60XBthai
0706     CONST.trackOpti.REMOVE_STRAY      = 0;
0707     CONST.trackOpti.NEIGHBOR_FLAG     = true;
0708     
0709     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0710     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0711     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0712     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0713     CONST.trackOpti.dA_LIMIT          = 0.7;
0714     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0715     
0716     CONST.trackOpti.SCORE_LIMIT       = -15;
0717     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0718     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0719     CONST.trackOpti.MIN_CELL_AGE      = 5;
0720     
0721     CONST.trackOpti.LYSE_FLAG             = true;
0722     
0723     CONST.trackOpti.FLUOR1_CHANGE_MIN     = .2;
0724     CONST.trackOpti.FLUOR2_CHANGE_MIN     = .2;
0725     CONST.trackOpti.LSPHEREMIN            = 10;
0726     CONST.trackOpti.LSPHEREMAX            = 20;
0727     CONST.trackOpti.ECCENTRICITY          = .7;
0728 <span class="keyword">elseif</span> ResFlag == R60XPa
0729     CONST.trackOpti.REMOVE_STRAY      = 0;
0730     CONST.trackOpti.NEIGHBOR_FLAG     = 1;
0731     
0732     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0733     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0734     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0735     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0736     CONST.trackOpti.dA_LIMIT          = 0.7;
0737     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0738     
0739     CONST.trackOpti.SCORE_LIMIT       = -15;
0740     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0741     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0742     CONST.trackOpti.MIN_CELL_AGE      = 5;
0743     
0744 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0745     CONST.trackOpti.REMOVE_STRAY      = 0;
0746     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0747     
0748     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0749     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0750     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0751     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0752     CONST.trackOpti.dA_LIMIT          = 0.7;
0753     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0754     
0755     CONST.trackOpti.SCORE_LIMIT       = -15;
0756     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0757     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0758     CONST.trackOpti.MIN_CELL_AGE      = 5;
0759 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0760     CONST.trackOpti.REMOVE_STRAY      = 0;
0761     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0762     
0763     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0764     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0765     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0766     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0767     CONST.trackOpti.dA_LIMIT          = 0.7;
0768     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0769     
0770     CONST.trackOpti.SCORE_LIMIT       = -15;
0771     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0772     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0773     CONST.trackOpti.MIN_CELL_AGE      = 5;
0774 <span class="keyword">end</span>
0775 
0776 
0777 
0778 
0779 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0780 <span class="comment">%                                                                         %</span>
0781 <span class="comment">% Constants for trackLoci                                                 %</span>
0782 <span class="comment">%                                                                         %</span>
0783 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0784 <span class="comment">%</span>
0785 <span class="comment">%    CONST.trackLoci.crop      : size of region cropped out of fluor image to fit loci;</span>
0786 <span class="comment">%</span>
0787 <span class="comment">%    CONST.trackLoci.numSpots  : numSpots[j] Array of the max number of loci to fit in channel</span>
0788 <span class="comment">%                              : empty leads to no spots fit.</span>
0789 <span class="comment">%    For example</span>
0790 <span class="comment">%    CONST.trackLoci.numSpots = [3 2] will find:</span>
0791 <span class="comment">%                                     * up to 3 spots in channel 2 (fluor1)</span>
0792 <span class="comment">%                                     * up to 2 spots in channel 3 (fluor2)</span>
0793 <span class="comment">%                                     * 0 spots in subsequent channels</span>
0794 <span class="comment">%</span>
0795 <span class="comment">%    CONST.trackLoci.fluorFlag : Computes statistics of fluorescence image</span>
0796 <span class="comment">%                              : for each cell</span>
0797 <span class="comment">%                              : These include the summed fluor intensity</span>
0798 <span class="comment">%                              : the center of intensity</span>
0799 <span class="comment">%                              : and the second moments of the intensity</span>
0800 <span class="comment">%                              : distribution</span>
0801 <span class="comment">%</span>
0802 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0803 
0804 CONST.trackLoci.gaussR = 1;
0805 
0806 
0807 <span class="keyword">if</span> ResFlag == R60X
0808     CONST.trackLoci.crop = 4;
0809     CONST.trackLoci.numSpots  = [];
0810     CONST.trackLoci.fluorFlag = 1;
0811 <span class="keyword">elseif</span> ResFlag == R100XB
0812     CONST.trackLoci.crop = 2;
0813     CONST.trackLoci.numSpots = [];
0814     CONST.trackLoci.fluorFlag = 0;
0815 <span class="keyword">elseif</span> ResFlag == R100X
0816     CONST.trackLoci.crop = 4;
0817     CONST.trackLoci.numSpots = [];
0818     CONST.trackLoci.fluorFlag = 0;
0819     CONST.trackLoci.gaussR = 1.5;
0820     
0821 <span class="keyword">elseif</span> ResFlag == R100XPa
0822     CONST.trackLoci.crop = 6;
0823     CONST.trackLoci.numSpots = [4];
0824     CONST.trackLoci.fluorFlag = 0;
0825 <span class="keyword">elseif</span> ResFlag == R60XA
0826     CONST.trackLoci.crop = 4;
0827     CONST.trackLoci.numSpots = [];
0828     CONST.trackLoci.fluorFlag = 1;
0829 <span class="keyword">elseif</span> ResFlag == R60XPaM
0830     CONST.trackLoci.crop = 4;
0831     CONST.trackLoci.numSpots = [];
0832     CONST.trackLoci.fluorFlag = 1;
0833 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0834     CONST.trackLoci.crop = 4;
0835     CONST.trackLoci.numSpots = [0,3];
0836     CONST.trackLoci.fluorFlag = 1;
0837 <span class="keyword">elseif</span> ResFlag == R60XBthai
0838     CONST.trackLoci.crop = 4;
0839     CONST.trackLoci.numSpots = [0,3];
0840     CONST.trackLoci.fluorFlag = 1;
0841 <span class="keyword">elseif</span> ResFlag == R60XPa
0842     CONST.trackLoci.crop = 4;
0843     CONST.trackLoci.numSpots = [];
0844     CONST.trackLoci.fluorFlag = 1;
0845 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0846     CONST.trackLoci.crop = 4;
0847     CONST.trackLoci.numSpots = [];
0848     CONST.trackLoci.fluorFlag = 0;
0849 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0850     CONST.trackLoci.crop = 4;
0851     CONST.trackLoci.numSpots = [];
0852     CONST.trackLoci.fluorFlag = 0;
0853 <span class="keyword">end</span>
0854 
0855 
0856 <span class="comment">% Do gating....</span>
0857 <span class="keyword">if</span> ResFlag == R60XA
0858     gate_file_name = <span class="string">'default_gate.mat'</span>;
0859     <span class="keyword">if</span> exist(gate_file_name, <span class="string">'file'</span> );
0860         disp([<span class="string">'loading default gate file: '</span>, gate_file_name] );
0861         tmp = load(gate_file_name);
0862         CONST.trackLoci.gate = tmp.gate;
0863     <span class="keyword">else</span>
0864         CONST.trackLoci.gate = [];
0865     <span class="keyword">end</span>
0866 <span class="keyword">else</span>
0867     CONST.trackLoci.gate = [];
0868 <span class="keyword">end</span>
0869 
0870 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0871 <span class="comment">%                                                                         %</span>
0872 <span class="comment">% Constants for getLocusTracks                                            %</span>
0873 <span class="comment">%                                                                         %</span>
0874 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0875 CONST.getLocusTracks.FLUOR1_MIN_SCORE = 1;
0876 CONST.getLocusTracks.FLUOR2_MIN_SCORE = 3;
0877 CONST.getLocusTracks.FLUOR1_REL       = 0.3;
0878 CONST.getLocusTracks.FLUOR2_REL       = 0.3;
0879 CONST.getLocusTracks.TimeStep         = 1;
0880 
0881 <span class="keyword">if</span> ResFlag == R60X
0882     CONST.getLocusTracks.PixelSize        = 6/60;
0883 <span class="keyword">elseif</span> ResFlag == R100XB
0884     CONST.getLocusTracks.PixelSize        = 6/100;
0885 <span class="keyword">elseif</span> ResFlag == R100X
0886     CONST.getLocusTracks.PixelSize        = 6/100;
0887 <span class="keyword">elseif</span> ResFlag == R100XPa
0888     CONST.getLocusTracks.PixelSize        = 6/100;
0889 <span class="keyword">elseif</span> ResFlag == R60XA
0890     CONST.getLocusTracks.PixelSize        = 6/60;
0891 <span class="keyword">elseif</span> ResFlag == R60XPaM
0892     CONST.getLocusTracks.PixelSize        = 6/60;
0893 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0894     CONST.getLocusTracks.PixelSize        = 6/60;
0895 <span class="keyword">elseif</span> ResFlag == R60XBthai
0896     CONST.getLocusTracks.PixelSize        = 6/60;
0897 <span class="keyword">elseif</span> ResFlag == R60XPa
0898     CONST.getLocusTracks.PixelSize        = 6/60;
0899 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0900     CONST.getLocusTracks.PixelSize        = 6/60;
0901 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0902     CONST.getLocusTracks.PixelSize        = 6/60;
0903 <span class="keyword">end</span>
0904 
0905 
0906 <span class="comment">%%</span>
0907 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0908 <span class="comment">%</span>
0909 <span class="comment">% Const for trackOptiView</span>
0910 <span class="comment">%</span>
0911 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0912 
0913 CONST.view.showFullCellCycleOnly = true;
0914 CONST.view.orientFlag            = true;
0915 CONST.view.falseColorFlag        = false;
0916 CONST.view.maxNumCell            = [];
0917 
0918 <span class="comment">% show log fluor reduce variation at high intensity</span>
0919 CONST.view.LogView         = false;
0920 
0921 <span class="keyword">if</span> ResFlag == R60XPaM2
0922     CONST.trackOpti.LogView               = true;
0923 <span class="keyword">end</span>
0924 
0925 <span class="comment">%%</span>
0926 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0927 <span class="comment">%</span>
0928 <span class="comment">% Const for findFocusSR</span>
0929 <span class="comment">%</span>
0930 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0931 CONST.findFocusSR.MAX_FOCUS_NUM = 8;
0932 CONST.findFocusSR.crop          = 4;
0933 CONST.findFocusSR.gaussR        = 1;
0934 CONST.findFocusSR.MAX_TRACE_NUM = 1000;
0935 CONST.findFocusSR.WS_CUT        = 50;
0936 <span class="comment">%CONST.findFocusSR.WS_CUT        = 1000;</span>
0937 
0938 CONST.findFocusSR.MAX_OFF       = 3;
0939 CONST.findFocusSR.I_MIN         = 150;
0940 CONST.findFocusSR.mag           = 16;
0941 CONST.findFocusSR.MIN_TRACE_LEN = 0;
0942 CONST.findFocusSR.R_LINK        = 2;
0943 CONST.findFocusSR.R_LINK        = 2;
0944 
0945 CONST.findFocusSR.SED_WINDOW    = 10;
0946 CONST.findFocusSR.SED_P         = 10;
0947 
0948 CONST.findFocusSR.A_MIN         =  6;
0949 
0950 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0951 <span class="comment">%</span>
0952 <span class="comment">% Const for SR</span>
0953 <span class="comment">%</span>
0954 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0955 CONST.SR.opt =  optimset(<span class="string">'MaxIter'</span>,1000,<span class="string">'Display'</span>,<span class="string">'off'</span>, <span class="string">'TolX'</span>, 1e-8);
0956 
0957 <span class="comment">% Setup CONST calues for image processing</span>
0958 CONST.SR.GausImgFilter_HighPass = fspecial(<span class="string">'gaussian'</span>,141,10);
0959 CONST.SR.GausImgFilter_LowPass3 = fspecial(<span class="string">'gaussian'</span>,21,3);
0960 CONST.SR.GausImgFilter_LowPass2 = fspecial(<span class="string">'gaussian'</span>,21,2);
0961 CONST.SR.GausImgFilter_LowPass1 = fspecial(<span class="string">'gaussian'</span>,7,1.25);
0962 CONST.SR.maxBlinkNum = 2;
0963 <span class="comment">% this is the pad size for cropping regions for fitting</span>
0964 CONST.SR.pad = 8;
0965 CONST.SR.crop = 4;
0966 CONST.SR.Icut = 1000;
0967 
0968 CONST.SR.rcut = 10; <span class="comment">% The maximum distance between frames that two PSFs can be before they are considered two seperate PSFs.</span>
0969 <span class="comment">% If there is more drift than this from one frame to the next they will be considered two seperate PSFs!</span>
0970 
0971 
0972 <span class="comment">% this is the threshold intensity for including locii in analysis measured</span>
0973 <span class="comment">% in std</span>
0974 CONST.SR.Ithresh = 2;
0975 
0976 <span class="comment">%%</span>
0977 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0978 <span class="comment">% close splash</span>
0979 
0980 <span class="comment">%close(h);</span></pre></div>
<hr><address>Generated on Tue 23-Feb-2016 16:32:17 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>