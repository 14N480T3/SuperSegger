<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of loadConstants</title>
  <meta name="keywords" content="loadConstants">
  <meta name="description" content="loadConstants loads the parameters for the superSegger/trackOpti package.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">SuperSeggerOpti_Release</a> &gt; <a href="index.html">settings</a> &gt; loadConstants.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for SuperSeggerOpti_Release/settings&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>loadConstants
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>loadConstants loads the parameters for the superSegger/trackOpti package.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function CONST = loadConstants( res, PARALLEL_FLAG ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> loadConstants loads the parameters for the superSegger/trackOpti package.
 If you want to customize the constants DO NOT CHANGE
 THIS FILE! Rename this file loadConstantsMine.m and
 put in somehwere in the path.
 That file will load automatically rather than this one.
 When you make loadConstantsMine.m, change
 disp( 'loadConstants: Initializing.')
 to loadConstantsMine to avoid confusion.

 INPUT :
   res :
   PARALLEL_FLAG : 1 if you want to use parallel computation
                   0 for single core computation

 Copyright (C) 2016 Wiggins Lab
 University of Washington, 2016
 This file is part of SuperSeggerOpti.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function CONST = loadConstants( res, PARALLEL_FLAG )</a>
0002 <span class="comment">% loadConstants loads the parameters for the superSegger/trackOpti package.</span>
0003 <span class="comment">% If you want to customize the constants DO NOT CHANGE</span>
0004 <span class="comment">% THIS FILE! Rename this file loadConstantsMine.m and</span>
0005 <span class="comment">% put in somehwere in the path.</span>
0006 <span class="comment">% That file will load automatically rather than this one.</span>
0007 <span class="comment">% When you make loadConstantsMine.m, change</span>
0008 <span class="comment">% disp( 'loadConstants: Initializing.')</span>
0009 <span class="comment">% to loadConstantsMine to avoid confusion.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% INPUT :</span>
0012 <span class="comment">%   res :</span>
0013 <span class="comment">%   PARALLEL_FLAG : 1 if you want to use parallel computation</span>
0014 <span class="comment">%                   0 for single core computation</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% Copyright (C) 2016 Wiggins Lab</span>
0017 <span class="comment">% University of Washington, 2016</span>
0018 <span class="comment">% This file is part of SuperSeggerOpti.</span>
0019 
0020 <span class="keyword">if</span> nargin &lt; 1 || isempty( res )
0021     res = 60;
0022 <span class="keyword">end</span>
0023 
0024 <span class="keyword">if</span> ~exist(<span class="string">'PARALLEL_FLAG'</span>,<span class="string">'var'</span>) || isempty( PARALLEL_FLAG )
0025     PARALLEL_FLAG = true;
0026 <span class="keyword">end</span>
0027 
0028 
0029 disp( <span class="string">'loadConstants: Initializing.'</span>);
0030 
0031 <span class="comment">% Octoscope setting</span>
0032 CONST.imAlign.DAPI    = [-0.0354   -0.0000    1.5500   -0.3900];
0033 CONST.imAlign.mCherry = [-0.0512   -0.0000   -1.1500    1.0000];
0034 CONST.imAlign.GFP     = [ 0.0000    0.0000    0.0000    0.0000];
0035 
0036 CONST.imAlign.out = {CONST.imAlign.GFP, <span class="keyword">...</span><span class="comment">    % c1 channel name</span>
0037     CONST.imAlign.GFP,<span class="keyword">...</span><span class="comment">  % c2 channel name</span>
0038     CONST.imAlign.GFP};        <span class="comment">% c3 channel name</span>
0039 
0040 
0041 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0042 <span class="comment">%                                                                         %</span>
0043 <span class="comment">% Take care of matlab pool. If a pool of workers doesn't exist, open it   %</span>
0044 <span class="comment">% up. This is for parallel processing on multiple cores.                  %</span>
0045 <span class="comment">%                                                                         %</span>
0046 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0047 
0048 <span class="comment">%PARALLEL_FLAG = 0;</span>
0049 
0050 <span class="comment">%splash_im = imread('splash.tif');</span>
0051 <span class="comment">%h = figure();</span>
0052 <span class="comment">%try</span>
0053 <span class="comment">%imshow( splash_im );</span>
0054 <span class="comment">%end</span>
0055 
0056 <span class="comment">% PARALLEL FOR MATLAB 2015</span>
0057 <span class="keyword">if</span> PARALLEL_FLAG
0058     poolobj = gcp(<span class="string">'nocreate'</span>); <span class="comment">% If no pool, do not create new one.</span>
0059     <span class="keyword">if</span> isempty(poolobj)
0060         poolobj = parpool(<span class="string">'local'</span>)
0061     <span class="keyword">end</span>
0062     CONST.parallel_pool_num = poolobj.NumWorkers
0063 <span class="keyword">else</span>
0064     CONST.parallel_pool_num = 0;
0065 <span class="keyword">end</span>
0066 
0067 CONST.xy_parallel = 0;
0068 CONST.PARALLEL_FLAG = PARALLEL_FLAG;
0069 CONST.show_status   = ~(CONST.parallel_pool_num);
0070 
0071 <span class="comment">% PARALLEL FOR MATLAB 2014</span>
0072 <span class="comment">% if PARALLEL_FLAG</span>
0073 <span class="comment">%     if exist( 'matlabpool', 'file' )</span>
0074 <span class="comment">%         CONST.parallel_pool_num = matlabpool('size');</span>
0075 <span class="comment">%         if ( CONST.parallel_pool_num == 0 )</span>
0076 <span class="comment">%             matlabpool</span>
0077 <span class="comment">%             try</span>
0078 <span class="comment">%                 CONST.parallel_pool_num =  matlabpool('size');</span>
0079 <span class="comment">%             catch</span>
0080 <span class="comment">%                 distcomp.feature('LocalUseMpiexec',false)</span>
0081 <span class="comment">%                 CONST.parallel_pool_num =  matlabpool('size');</span>
0082 <span class="comment">%             end</span>
0083 <span class="comment">%             disp( ['loadConstants: Parallel processing pool opened. Size ', num2str(CONST.parallel_pool_num),'.' ] );</span>
0084 <span class="comment">%</span>
0085 <span class="comment">%         else</span>
0086 <span class="comment">%             disp( ['loadConstants: Parallel processing pool already open. Size ', num2str( CONST.parallel_pool_num),'.']);</span>
0087 <span class="comment">%         end</span>
0088 <span class="comment">%     else</span>
0089 <span class="comment">%         disp( 'loadConstants: Attempted to open matlab pool, but no parallel processing toolbox.' );</span>
0090 <span class="comment">%         CONST.parallel_pool_num = 0;</span>
0091 <span class="comment">%     end</span>
0092 <span class="comment">% else</span>
0093 <span class="comment">%     CONST.parallel_pool_num = 0;</span>
0094 <span class="comment">%     %pause( 2 );</span>
0095 <span class="comment">% end</span>
0096 <span class="comment">%</span>
0097 <span class="comment">%</span>
0098 <span class="comment">%</span>
0099 <span class="comment">%</span>
0100 <span class="comment">% CONST.PARALLEL_FLAG = PARALLEL_FLAG;</span>
0101 <span class="comment">% CONST.show_status   = ~(CONST.parallel_pool_num);</span>
0102 
0103 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0104 <span class="comment">%                                                                         %</span>
0105 <span class="comment">% Specify scope resolution here                                           %</span>
0106 <span class="comment">%                                                                         %</span>
0107 <span class="comment">% Set the res flag to apply to your exp.                                  %</span>
0108 <span class="comment">%                                                                         %</span>
0109 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0110 
0111 
0112 <span class="comment">% Values for setting res</span>
0113 <span class="comment">%</span>
0114 <span class="comment">% '100XPa': loadConstants 100X Pseudomonas</span>
0115 <span class="comment">% '60XEc' : loadConstants 60X Ecoli</span>
0116 <span class="comment">% '100XEc': loadConstants 100X Ecoli</span>
0117 
0118 R100X    = 1; <span class="comment">% for 100X unbinned, 6 um pixels</span>
0119 R100XB   = 2; <span class="comment">% for 100X 2x2 binned, 6 um pixels</span>
0120 R60X     = 3; <span class="comment">% for 60X, 6 um pixels</span>
0121 R100XPa  = 4; <span class="comment">% for 100X, Pseudomonas</span>
0122 R60XPa   = 5; <span class="comment">% for 60X, Pseudomonas</span>
0123 R60XEcHR = 6; <span class="comment">% for 60X, coli slow high density.</span>
0124 R60XEcLB = 7; <span class="comment">% for 60X, coli slow high density.</span>
0125 R60XA    = 8; <span class="comment">% for 60X, coli ASKA</span>
0126 R60XPaM  = 9; <span class="comment">% for 60X, Pseudomonas Minimal</span>
0127 R60XPaM2 = 10; <span class="comment">% for 60X, Pseudomonas Minimal</span>
0128 R60XBthai = 11;
0129 
0130 CONST.R100X    = R100X;
0131 CONST.R100XB   = R100XB;
0132 CONST.R60X     = R60X;
0133 CONST.R100XPa  = R100XPa;
0134 CONST.R60XPa   = R60XPa;
0135 CONST.R60XEcHR = R60XEcHR;
0136 CONST.R60XEcLB = R60XEcLB;
0137 CONST.R60XA    = R60XA;
0138 CONST.R60XPaM  = R60XPaM;
0139 CONST.R60XPaM2 = R60XPaM2;
0140 CONST.R60XPaM2 = R60XBthai;
0141 
0142 
0143 
0144 cl = class(res);
0145 
0146 <span class="keyword">if</span> strcmp(cl,<span class="string">'double'</span> )
0147     
0148     <span class="keyword">if</span> res == 60
0149         disp(<span class="string">'loadConstants: 60X'</span>);
0150         ResFlag = R60X;
0151     <span class="keyword">else</span>
0152         disp(<span class="string">'loadConstants:  100X'</span>);
0153         ResFlag = R100X;
0154     <span class="keyword">end</span>
0155 <span class="keyword">elseif</span> strcmp(cl, <span class="string">'char'</span> );
0156     <span class="keyword">if</span> strcmp(res,<span class="string">'100XPa'</span>);
0157         disp(<span class="string">'loadConstants:  100X Pseudomonas'</span>);
0158         ResFlag = R100XPa;
0159     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XEc'</span>)
0160         disp(<span class="string">'loadConstants:  60X Ecoli'</span>);
0161         ResFlag = R60X;
0162     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XPa'</span>)
0163         disp(<span class="string">'loadConstants:  60X Pseudomonas'</span>);
0164         ResFlag = R60XPa;
0165     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XEcHR'</span>)
0166         disp(<span class="string">'loadConstants:  60X Ecoli Highres'</span>);
0167         ResFlag = R60XEcHR;
0168     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XA'</span>)
0169         disp(<span class="string">'loadConstants:  60X ASKA'</span>);
0170         ResFlag = R60XA;
0171     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XEcLB'</span>)
0172         disp(<span class="string">'loadConstants:  60X Ecoli LB'</span>);
0173         ResFlag = R60XEcLB;
0174     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XPaM'</span>)
0175         disp(<span class="string">'loadConstants:  60X Pseudomonas Minimal'</span>);
0176         ResFlag = R60XPaM;
0177     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XPaM2'</span>)
0178         disp(<span class="string">'loadConstants:  60X Pseudomonas Minimal 2'</span>);
0179         ResFlag = R60XPaM2;
0180     <span class="keyword">elseif</span> strcmp(res,<span class="string">'60XBthai'</span>)
0181         disp(<span class="string">'loadConstants:  60X B Thai'</span>);
0182         ResFlag = R60XBthai;
0183     <span class="keyword">else</span>
0184         disp(<span class="string">'loadConstants:  100X Ecoli'</span>);
0185         ResFlag = R100X;
0186     <span class="keyword">end</span>
0187 <span class="keyword">else</span>
0188     disp(<span class="string">'loadConstants:  100X Ecoli'</span>);
0189     ResFlag = R100X;
0190 <span class="keyword">end</span>
0191 
0192 
0193 CONST.ResFlag = ResFlag;
0194 CONST.align.CROP_FLAG  = false;
0195 CONST.align.ALIGN_FLAG = true;
0196 
0197 <span class="comment">%%</span>
0198 <span class="comment">% This is where the function pointer to the segmentation backend is set.</span>
0199 <span class="comment">% By changing this field you can change the segmentation backend of</span>
0200 <span class="comment">% BatchSuperSeggerOpti.</span>
0201 
0202 CONST.seg.segFun = @ssoSegFun;
0203 <span class="keyword">if</span> ResFlag == R60XPaM2
0204     CONST.seg.segFun = @ssoSegFunPa;
0205 <span class="keyword">end</span>
0206 
0207 <span class="comment">% optimize regions based on cell shape (slower)</span>
0208 CONST.seg.OPTI_FLAG = true;
0209 
0210 <span class="keyword">if</span> ResFlag == R60XPaM
0211     CONST.seg.OPTI_FLAG                = true;
0212 <span class="keyword">end</span>
0213 
0214 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0215 <span class="comment">%                                                                         %</span>
0216 <span class="comment">% Parameters used for segmentation by superSeggerOpti                     %</span>
0217 <span class="comment">%                                                                         %</span>
0218 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0219 
0220 <span class="comment">% This is the minimum area of cells/cell clumps in the creation of the</span>
0221 <span class="comment">% background mask.</span>
0222 CONST.superSeggerOpti.MIN_BG_AREA = 150;
0223 <span class="comment">%CONST.superSeggerOpti.MIN_BG_AREA = 20;</span>
0224 
0225 <span class="comment">% set a max number of segs so that the code does die when doing bi batch</span>
0226 <span class="comment">% jobs.</span>
0227 CONST.superSeggerOpti.MAX_SEG_NUM = 10000;
0228 
0229 <span class="comment">% These constants are used in generating the cell clump mask.</span>
0230 CONST.superSeggerOpti.THRESH1  =   50;
0231 CONST.superSeggerOpti.THRESH2  =    0;
0232 CONST.superSeggerOpti.Amax     = 5000;
0233 
0234 <span class="comment">% Size in pixels of the structuring element in the contrast-enhancing filter. It</span>
0235 <span class="comment">% should be proportional to the width of a cell.</span>
0236 <span class="keyword">if</span> ResFlag == R60X
0237     <span class="comment">%CONST.superSeggerOpti.MAGIC_RADIUS =  5;</span>
0238     <span class="comment">%CONST.superSeggerOpti.CUT_INT      = 70;</span>
0239     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0240     CONST.superSeggerOpti.CUT_INT      = 70;
0241     CONST.superSeggerOpti.Amax         = 1000;
0242     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0243 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0244     CONST.superSeggerOpti.MAGIC_RADIUS =  5;
0245     CONST.superSeggerOpti.CUT_INT      = 70;
0246 <span class="keyword">elseif</span> ResFlag == R60XPa
0247     CONST.superSeggerOpti.MAGIC_RADIUS =  5;
0248     CONST.superSeggerOpti.CUT_INT      = 100;
0249 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0250     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0251     CONST.superSeggerOpti.CUT_INT      = 70;
0252 <span class="keyword">elseif</span> ResFlag == R100X
0253     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0254     CONST.superSeggerOpti.CUT_INT      = 50;
0255 <span class="keyword">elseif</span> ResFlag == R100XPa
0256     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0257     CONST.superSeggerOpti.CUT_INT      = 50;
0258     CONST.superSeggerOpti.MAX_SEG_NUM = 10000000;
0259     
0260 <span class="keyword">elseif</span> ResFlag == R60XA
0261     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0262     CONST.superSeggerOpti.CUT_INT      = 50;
0263     CONST.superSeggerOpti.Amax         = 80;
0264     <span class="comment">%CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;</span>
0265 <span class="keyword">elseif</span> (ResFlag == R60XPaM)
0266     CONST.superSeggerOpti.MAGIC_RADIUS =  6;
0267     CONST.superSeggerOpti.CUT_INT      = 50;
0268     CONST.superSeggerOpti.Amax         = 80;
0269     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0270 <span class="keyword">elseif</span> (ResFlag == R60XPaM2)
0271     CONST.superSeggerOpti.MAGIC_RADIUS =  3;
0272     CONST.superSeggerOpti.CUT_INT      = 50;
0273     CONST.superSeggerOpti.Amax         = 80;
0274     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0275     CONST.superSeggerOpti.MIN_BG_AREA = 30;
0276 <span class="keyword">elseif</span> (ResFlag == R60XBthai)
0277     CONST.superSeggerOpti.MAGIC_RADIUS =  3;
0278     CONST.superSeggerOpti.CUT_INT      = 50;
0279     CONST.superSeggerOpti.Amax         = 150;
0280     CONST.superSeggerOpti.MAX_SEG_NUM  = 10000000;
0281     CONST.superSeggerOpti.MIN_BG_AREA  = 30;
0282     CONST.superSeggerOpti.THRESH1      = 85;
0283     CONST.superSeggerOpti.THRESH2      = 40;
0284 <span class="keyword">end</span>
0285 
0286 <span class="comment">% Intensity threshold for output of the contrast enhancement. it should be</span>
0287 <span class="comment">% a number close to zero. Intensities below it are set to zero.</span>
0288 CONST.superSeggerOpti.MAGIC_THRESHOLD = 5;
0289 
0290 <span class="comment">% Intensity threshold to define good segments. Segments which intersect a</span>
0291 <span class="comment">% pixel whose intensity is lower than this number are bad segments.</span>
0292 CONST.superSeggerOpti.MIN_THRESHOLD = 10;
0293 
0294 <span class="comment">% Another intensity threshold to define good segments. If the mean</span>
0295 <span class="comment">% intensity of all pixels intersected by a segment is less than this</span>
0296 <span class="comment">% number, the segment is bad.</span>
0297 CONST.superSeggerOpti.MEAN_THRESHOLD = 18;
0298 
0299 <span class="comment">% Width in pixels of the gaussian used to smooth the raw phase image. It</span>
0300 <span class="comment">% should be on the order of a pixel.</span>
0301 <span class="comment">% if ResFlag == R60X</span>
0302 <span class="comment">%     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/8;</span>
0303 <span class="comment">% elseif ResFlag == R100X</span>
0304 <span class="comment">%     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/4;</span>
0305 <span class="comment">% elseif ResFlag == R100XPa</span>
0306 <span class="comment">%     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/4;</span>
0307 <span class="comment">% end</span>
0308 <span class="keyword">if</span> ResFlag == R60X
0309     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0310 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0311     CONST.superSeggerOpti.SMOOTH_WIDTH = 1/2;
0312 <span class="keyword">elseif</span> ResFlag == R100X
0313     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0314 <span class="keyword">elseif</span> ResFlag == R100XPa
0315     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0316 <span class="keyword">elseif</span> ResFlag == R60XA
0317     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0318 <span class="keyword">elseif</span> ResFlag == R60XPaM
0319     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0320 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0321     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0322 <span class="keyword">elseif</span> ResFlag == R60XBthai
0323     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0324 <span class="keyword">elseif</span> ResFlag == R60XPa
0325     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0326 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0327     CONST.superSeggerOpti.SMOOTH_WIDTH = 1;
0328 <span class="keyword">end</span>
0329 
0330 <span class="comment">% MAX_WIDTH</span>
0331 <span class="comment">% Width threshold for the iterative segment refinement. Masked regions</span>
0332 <span class="comment">% whose minor axis is greater than this number are considered for further</span>
0333 <span class="comment">% segmentation. All other masked regions are assumed to correctly define</span>
0334 <span class="comment">% a cell.</span>
0335 <span class="keyword">if</span> ResFlag == R60X
0336     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 10;</span>
0337     CONST.superSeggerOpti.MAX_WIDTH = 10;
0338     CONST.superSeggerOpti.crop_rad  =  2;
0339 <span class="keyword">elseif</span> ResFlag == R100X
0340     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0341     CONST.superSeggerOpti.MAX_WIDTH = 20;
0342     CONST.superSeggerOpti.crop_rad  =  2;
0343 <span class="keyword">elseif</span> ResFlag == R100XPa
0344     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0345     CONST.superSeggerOpti.MAX_WIDTH = 20;
0346     CONST.superSeggerOpti.crop_rad  =  2;
0347 <span class="keyword">elseif</span> ResFlag == R60XA
0348     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0349     CONST.superSeggerOpti.MAX_WIDTH = 20;
0350     CONST.superSeggerOpti.crop_rad  =  2;
0351 <span class="keyword">elseif</span> ResFlag == R60XPaM
0352     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0353     CONST.superSeggerOpti.MAX_WIDTH = 10;
0354     CONST.superSeggerOpti.crop_rad  =  2;
0355 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0356     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0357     CONST.superSeggerOpti.MAX_WIDTH = 10;
0358     CONST.superSeggerOpti.crop_rad  =  2;
0359 <span class="keyword">elseif</span> ResFlag == R60XBthai
0360     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0361     CONST.superSeggerOpti.MAX_WIDTH = 10;
0362     CONST.superSeggerOpti.crop_rad  =  2;
0363 <span class="keyword">elseif</span> ResFlag == R60XPa
0364     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0365     CONST.superSeggerOpti.MAX_WIDTH = 10;
0366     CONST.superSeggerOpti.crop_rad  =  2;
0367 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0368     <span class="comment">%CONST.superSeggerOpti.MAX_WIDTH = 15;</span>
0369     CONST.superSeggerOpti.MAX_WIDTH = 20;
0370     CONST.superSeggerOpti.crop_rad  =  2;
0371 <span class="keyword">end</span>
0372 
0373 
0374 <span class="comment">% A is the vector used to generate the segment score.</span>
0375 <span class="keyword">if</span> ResFlag == R60X
0376     tmp = load( <span class="string">'Ec60.mat'</span> );
0377 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0378     tmp = load( <span class="string">'Ec60.mat'</span> );
0379 <span class="keyword">elseif</span> ResFlag == R100X
0380     tmp = load( <span class="string">'Ec100X.mat'</span> );
0381 <span class="keyword">elseif</span> ResFlag == R100XPa
0382     tmp = load( <span class="string">'Pseud.mat'</span> );
0383 <span class="keyword">elseif</span> ResFlag == R60XA
0384     tmp = load( <span class="string">'Ec60XASKA.mat'</span> );
0385 <span class="keyword">elseif</span> ResFlag == R60XPaM
0386     tmp = load( <span class="string">'Pseud60Min.mat'</span> );
0387 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0388     tmp = load( <span class="string">'Pseud60Min.mat'</span> );
0389 <span class="keyword">elseif</span> ResFlag == R60XBthai
0390     tmp = load( <span class="string">'Bthai.mat'</span> );
0391     disp(<span class="string">'whammmm bammmm'</span> );
0392 <span class="keyword">elseif</span> ResFlag == R60XPa
0393     tmp = load( <span class="string">'Pseud60.mat'</span> );
0394 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0395     tmp = load( <span class="string">'Ec60XLB.mat'</span> );
0396 <span class="keyword">end</span>
0397 
0398 CONST.superSeggerOpti.A = tmp.A;
0399 CONST.superSeggerOpti.NUM_INFO = 19;
0400 
0401 
0402 
0403 
0404 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0405 <span class="comment">%                                                                         %</span>
0406 <span class="comment">% Constants for regionOpti                                                %</span>
0407 <span class="comment">%                                                                         %</span>
0408 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0409 
0410 <span class="comment">% MAX_NUM_RESOLVE is the max number of segments that regionOpti will try</span>
0411 <span class="comment">% to explore systematically (vs simulated anneal). With the current</span>
0412 <span class="comment">% incarnation of the code, the speed crossover is about 8.</span>
0413 CONST.regionOpti.MAX_NUM_RESOLVE    = 5000;
0414 CONST.regionOpti.MAX_NUM_SYSTEMATIC = 8;
0415 
0416 <span class="comment">% regionOpti explores turning on and off segments that have marginal</span>
0417 <span class="comment">% scores and tries to optimize the cell score computed by regionScoreFun--</span>
0418 <span class="comment">% constants below. Margninal is defined as</span>
0419 <span class="comment">% CutOffScoreHi &lt; scoreRaw &lt; CutOffScoreLo</span>
0420 CONST.regionOpti.CutOffScoreHi =  5;
0421 CONST.regionOpti.CutOffScoreLo = -5;
0422 CONST.regionOpti.Emax          = 1e2;
0423 CONST.regionOpti.fignum        = 1;
0424 CONST.regionOpti.dt            = 50;
0425 CONST.regionOpti.Nt            = 500;
0426 
0427 <span class="comment">% sutomatically length sim anneal period linearly with the number of</span>
0428 <span class="comment">% segments</span>
0429 CONST.regionOpti.ADJUST_FLAG   = true;
0430 
0431 <span class="comment">% For regionOpti, this is the minimum region size, below which neighbor</span>
0432 <span class="comment">% segements are switch on during optimization.</span>
0433 CONST.regionOpti.MAX_WIDTH  = CONST.superSeggerOpti.MAX_WIDTH;
0434 
0435 
0436 <span class="comment">% For regionOpti, this is the minimum region size, below which neighbor</span>
0437 <span class="comment">% segements are switch on during optimization.</span>
0438 <span class="keyword">if</span> ResFlag == R60X
0439     CONST.regionOpti.MAX_LENGTH  = 15;
0440 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0441     CONST.regionOpti.MAX_LENGTH  = 15;
0442 <span class="keyword">elseif</span> ResFlag == R100X
0443     CONST.regionOpti.MAX_LENGTH  = 25;
0444 <span class="keyword">elseif</span> ResFlag == R100XPa
0445     CONST.regionOpti.MAX_LENGTH  = 25;
0446 <span class="keyword">elseif</span> ResFlag == R60XA
0447     CONST.regionOpti.MAX_LENGTH  = 25;
0448 <span class="keyword">elseif</span> ResFlag == R60XPaM
0449     CONST.regionOpti.MAX_LENGTH  = 8;
0450 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0451     CONST.regionOpti.MAX_LENGTH  = 8;
0452 <span class="keyword">elseif</span> ResFlag == R60XBthai
0453     CONST.regionOpti.MAX_LENGTH  = 8;
0454 <span class="keyword">elseif</span> ResFlag == R60XPa
0455     CONST.regionOpti.MAX_LENGTH  = 10;
0456 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0457     CONST.regionOpti.MAX_LENGTH  = 25;
0458 <span class="keyword">end</span>
0459 
0460 <span class="comment">% To calculate the total score:</span>
0461 <span class="comment">% Score_Total = Score_Cell + DE_norm * ( -Score_SegOn + Score_SegOff )</span>
0462 <span class="comment">% DE_norm controls the relative importance of segment scores versus cell</span>
0463 <span class="comment">% scores.</span>
0464 CONST.regionOpti.DE_norm = 0.5;
0465 
0466 
0467 
0468 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0469 <span class="comment">%                                                                         %</span>
0470 <span class="comment">% Constants for regionScoreFun                                            %</span>
0471 <span class="comment">%                                                                         %</span>
0472 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0473 
0474 
0475 <span class="comment">% L20 is the optimal cell width</span>
0476 <span class="comment">% L10 is the lower soft cutoff of cell length</span>
0477 <span class="comment">% mu is a score constant.</span>
0478 <span class="comment">% E0 is the multiplier that sets the balance between cell width and cell</span>
0479 <span class="comment">% length.</span>
0480 <span class="keyword">if</span> ResFlag == R60X
0481     <span class="comment">%     CONST.regionScoreFun.E        = tmp.E;</span>
0482     <span class="comment">%     CONST.regionScoreFun.NUM_INFO = 19;</span>
0483     <span class="comment">%     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;</span>
0484     <span class="comment">%     CONST.regionScoreFun.props    = @cellprops4;</span>
0485     <span class="comment">%     CONST.regionScoreFun.names    = @getRegNames4;</span>
0486     CONST.regionScoreFun.NUM_INFO = 21;
0487     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0488     CONST.regionScoreFun.props    = @cellprops5;
0489     CONST.regionScoreFun.E        = tmp.E;
0490     CONST.regionScoreFun.names    = @getRegNames3;
0491 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0492     CONST.regionScoreFun.E        = tmp.E;
0493     CONST.regionScoreFun.NUM_INFO = 11;
0494     CONST.regionScoreFun.fun      = @regionScoreFun0;
0495     CONST.regionScoreFun.props    = @cellprops0;
0496 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0497     CONST.regionScoreFun.E        = tmp.E;
0498     <span class="comment">%    CONST.regionScoreFun.NUM_INFO = 21;</span>
0499     <span class="comment">%    CONST.regionScoreFun.fun      = @regionScoreFunMatrix;</span>
0500     <span class="comment">%    CONST.regionScoreFun.props    = @cellprops3;</span>
0501     CONST.regionScoreFun.NUM_INFO = 8;
0502     CONST.regionScoreFun.fun      = @regionScoreFunPseud2;
0503     CONST.regionScoreFun.props    = @cellpropsPseud;
0504 <span class="keyword">elseif</span> ResFlag == R100X
0505     CONST.regionScoreFun.E        = tmp.E;
0506     <span class="comment">%     CONST.regionScoreFun.NUM_INFO = 11;</span>
0507     <span class="comment">%     CONST.regionScoreFun.fun      = @regionScoreFun0;</span>
0508     <span class="comment">%     CONST.regionScoreFun.props    = @cellprops0;</span>
0509     CONST.regionScoreFun.NUM_INFO = 21;
0510     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0511     CONST.regionScoreFun.props    = @cellprops3;
0512     
0513 <span class="keyword">elseif</span> ResFlag == R100XPa
0514     CONST.regionScoreFun.E        = tmp.E;
0515     CONST.regionScoreFun.NUM_INFO = 8;
0516     CONST.regionScoreFun.fun      = @regionScoreFunPseud2;
0517     CONST.regionScoreFun.props    = @cellpropsPseud;
0518 <span class="keyword">elseif</span> ResFlag == R60XA
0519     CONST.regionScoreFun.E        = tmp.E;
0520     CONST.regionScoreFun.NUM_INFO = 21;
0521     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0522     CONST.regionScoreFun.props    = @cellprops3;
0523 <span class="keyword">elseif</span> ResFlag == R60XPaM
0524     CONST.regionScoreFun.E        = tmp.E;
0525     CONST.regionScoreFun.NUM_INFO = 21;
0526     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0527     CONST.regionScoreFun.props    = @cellprops3;
0528 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0529     CONST.regionScoreFun.E        = tmp.E;
0530     CONST.regionScoreFun.NUM_INFO = 21;
0531     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0532     CONST.regionScoreFun.props    = @cellprops3;
0533 <span class="keyword">elseif</span> ResFlag == R60XBthai
0534     CONST.regionScoreFun.E        = tmp.E;
0535     CONST.regionScoreFun.NUM_INFO = 21;
0536     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0537     CONST.regionScoreFun.props    = @cellprops3;
0538 <span class="keyword">elseif</span> ResFlag == R60XPa
0539     
0540     CONST.regionScoreFun.NUM_INFO = 21;
0541     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;
0542     CONST.regionScoreFun.props    = @cellprops3;
0543     CONST.regionScoreFun.E        = tmp.E;
0544     CONST.regionScoreFun.names    = @getRegNames3;
0545     
0546     <span class="comment">%     CONST.regionScoreFun.E        = tmp.E;</span>
0547     <span class="comment">%     CONST.regionScoreFun.NUM_INFO = 19;</span>
0548     <span class="comment">%     CONST.regionScoreFun.fun      = @regionScoreFunMatrix;</span>
0549     <span class="comment">%     CONST.regionScoreFun.props    = @cellprops4;</span>
0550     <span class="comment">%     CONST.regionScoreFun.names    = @getRegNames4;</span>
0551 <span class="keyword">end</span>
0552 
0553 
0554 CONST.trackOpti.MIN_AREA = 12;
0555 
0556 
0557 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0558 <span class="comment">%                                                                         %</span>
0559 <span class="comment">% Constants for trackOpti                                                 %</span>
0560 <span class="comment">%                                                                         %</span>
0561 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0562 
0563 
0564 
0565 <span class="comment">% CONST.trackOpti.OVERLAP_LIMIT_MIN: defines what counts as an overlap</span>
0566 <span class="comment">%                                  : between frames</span>
0567 <span class="comment">% CONST.trackOpti.OVERLAP_LIMIT_MAX: no longer used.</span>
0568 <span class="comment">%</span>
0569 <span class="comment">% CONST.trackOpti.AREA_CHANGE_LIMIT: No longer used.</span>
0570 <span class="comment">%</span>
0571 <span class="comment">% CONST.trackOpti.dA_LIMIT_ErRes   : area ratio necessary for 1 to 1.</span>
0572 <span class="comment">% CONST.trackOpti.dA_LIMIT         : if min(A_1,A_2)/max(A_1,A_2) &lt; dA_Limit</span>
0573 <span class="comment">%                                  : set a mapping error</span>
0574 
0575 <span class="comment">% CONST.trackOpti.SCORE_LIMIT          : no longer used</span>
0576 <span class="comment">% CONST.trackOpti.SCORE_LIMIT_DAUGHTER : limiting score for daughter cell</span>
0577 <span class="comment">%                                      : on cell division</span>
0578 <span class="comment">% CONST.trackOpti.SCORE_LIMIT_MOTHER   : limiting score for mother cell</span>
0579 <span class="comment">%                                      : on cell division</span>
0580 
0581 <span class="comment">% THIS TURNS ON FUNCTIONALITY TO GUESS NEW AND OLD POLES IN RECENCTLY</span>
0582 <span class="comment">% DIVIDED CELLS IN A SNAPSHOT ANALYISIS</span>
0583 CONST.trackOpti.pole_flag             = 1 ;
0584 
0585 CONST.trackOpti.FSKIP_FLAG            = true;
0586 
0587 <span class="comment">% Mougous lab lysis detection off</span>
0588 CONST.trackOpti.LYSE_FLAG             = false;
0589 
0590 
0591 
0592 
0593 CONST.trackOpti.MERGED_FLAG     = true;
0594 CONST.trackOpti.HARDLINK_FLAG   = false;
0595 
0596 CONST.trackOpti.DA_MAX          =  0.2;
0597 CONST.trackOpti.DA_MIN          = -0.2;
0598 
0599 
0600 <span class="keyword">if</span> ResFlag == R100X
0601     CONST.trackOpti.REMOVE_STRAY      = 1;
0602     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0603     
0604     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0605     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0606     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0607     CONST.trackOpti.dA_LIMIT_ErRes    = 0.8;
0608     CONST.trackOpti.dA_LIMIT          = 0.7;
0609     
0610     
0611     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0612     
0613     CONST.trackOpti.SCORE_LIMIT       = -1;
0614     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -1;
0615     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -1;
0616     CONST.trackOpti.MIN_CELL_AGE      = 3;
0617     
0618 <span class="keyword">elseif</span> ResFlag == R60X
0619     CONST.trackOpti.REMOVE_STRAY      = 0;
0620     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0621     
0622     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0623     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0624     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0625     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0626     CONST.trackOpti.dA_LIMIT          = 0.7;
0627     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0628     
0629     CONST.trackOpti.SCORE_LIMIT       = -15;
0630     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0631     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0632     CONST.trackOpti.MIN_CELL_AGE      = 1;
0633     
0634 <span class="keyword">elseif</span> ResFlag == R100XPa
0635     CONST.trackOpti.REMOVE_STRAY      = 0;
0636     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0637     
0638     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0639     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0640     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0641     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0642     CONST.trackOpti.dA_LIMIT          = 0.7;
0643     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0644     
0645     CONST.trackOpti.SCORE_LIMIT       = -15;
0646     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0647     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0648     CONST.trackOpti.MIN_CELL_AGE      = 5;
0649 <span class="keyword">elseif</span> ResFlag == R60XA
0650     CONST.trackOpti.REMOVE_STRAY      = 0;
0651     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0652     
0653     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0654     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0655     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0656     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0657     CONST.trackOpti.dA_LIMIT          = 0.7;
0658     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0659     
0660     CONST.trackOpti.SCORE_LIMIT       = -15;
0661     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0662     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0663     CONST.trackOpti.MIN_CELL_AGE      = 5;
0664 <span class="keyword">elseif</span> ResFlag == R60XPaM
0665     CONST.trackOpti.REMOVE_STRAY      = 0;
0666     CONST.trackOpti.NEIGHBOR_FLAG     = true;
0667     
0668     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0669     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0670     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0671     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0672     CONST.trackOpti.dA_LIMIT          = 0.7;
0673     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0674     
0675     CONST.trackOpti.SCORE_LIMIT       = -15;
0676     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0677     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0678     CONST.trackOpti.MIN_CELL_AGE      = 5;
0679 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0680     CONST.trackOpti.REMOVE_STRAY      = 0;
0681     CONST.trackOpti.NEIGHBOR_FLAG     = true;
0682     
0683     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0684     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0685     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0686     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0687     CONST.trackOpti.dA_LIMIT          = 0.7;
0688     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0689     
0690     CONST.trackOpti.SCORE_LIMIT       = -15;
0691     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0692     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0693     CONST.trackOpti.MIN_CELL_AGE      = 5;
0694     
0695     CONST.trackOpti.LYSE_FLAG             = true;
0696     
0697     CONST.trackOpti.FLUOR1_CHANGE_MIN     = .2;
0698     CONST.trackOpti.FLUOR2_CHANGE_MIN     = .2;
0699     CONST.trackOpti.LSPHEREMIN            = 10;
0700     CONST.trackOpti.LSPHEREMAX            = 20;
0701     CONST.trackOpti.ECCENTRICITY          = .7;
0702 <span class="keyword">elseif</span> ResFlag == R60XBthai
0703     CONST.trackOpti.REMOVE_STRAY      = 0;
0704     CONST.trackOpti.NEIGHBOR_FLAG     = true;
0705     
0706     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0707     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0708     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0709     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0710     CONST.trackOpti.dA_LIMIT          = 0.7;
0711     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0712     
0713     CONST.trackOpti.SCORE_LIMIT       = -15;
0714     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0715     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0716     CONST.trackOpti.MIN_CELL_AGE      = 5;
0717     
0718     CONST.trackOpti.LYSE_FLAG             = true;
0719     
0720     CONST.trackOpti.FLUOR1_CHANGE_MIN     = .2;
0721     CONST.trackOpti.FLUOR2_CHANGE_MIN     = .2;
0722     CONST.trackOpti.LSPHEREMIN            = 10;
0723     CONST.trackOpti.LSPHEREMAX            = 20;
0724     CONST.trackOpti.ECCENTRICITY          = .7;
0725 <span class="keyword">elseif</span> ResFlag == R60XPa
0726     CONST.trackOpti.REMOVE_STRAY      = 0;
0727     CONST.trackOpti.NEIGHBOR_FLAG     = 1;
0728     
0729     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0730     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0731     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0732     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0733     CONST.trackOpti.dA_LIMIT          = 0.7;
0734     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0735     
0736     CONST.trackOpti.SCORE_LIMIT       = -15;
0737     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0738     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0739     CONST.trackOpti.MIN_CELL_AGE      = 5;
0740     
0741 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0742     CONST.trackOpti.REMOVE_STRAY      = 0;
0743     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0744     
0745     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0746     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0747     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0748     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0749     CONST.trackOpti.dA_LIMIT          = 0.7;
0750     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0751     
0752     CONST.trackOpti.SCORE_LIMIT       = -15;
0753     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0754     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0755     CONST.trackOpti.MIN_CELL_AGE      = 5;
0756 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0757     CONST.trackOpti.REMOVE_STRAY      = 0;
0758     CONST.trackOpti.NEIGHBOR_FLAG     = 0;
0759     
0760     CONST.trackOpti.OVERLAP_LIMIT_MIN = 0.08;
0761     CONST.trackOpti.OVERLAP_LIMIT_MAX = 0.8;
0762     CONST.trackOpti.AREA_CHANGE_LIMIT = 0.2;
0763     CONST.trackOpti.dA_LIMIT_ErRes    = 0.7;
0764     CONST.trackOpti.dA_LIMIT          = 0.7;
0765     CONST.trackOpti.MAX_WIDTH         = CONST.regionOpti.MAX_WIDTH;
0766     
0767     CONST.trackOpti.SCORE_LIMIT       = -15;
0768     CONST.trackOpti.SCORE_LIMIT_DAUGHTER = -5;
0769     CONST.trackOpti.SCORE_LIMIT_MOTHER   = -15;
0770     CONST.trackOpti.MIN_CELL_AGE      = 5;
0771 <span class="keyword">end</span>
0772 
0773 
0774 
0775 
0776 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0777 <span class="comment">%                                                                         %</span>
0778 <span class="comment">% Constants for trackLoci                                                 %</span>
0779 <span class="comment">%                                                                         %</span>
0780 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0781 <span class="comment">%</span>
0782 <span class="comment">%    CONST.trackLoci.crop      : size of region cropped out of fluor image to fit loci;</span>
0783 <span class="comment">%</span>
0784 <span class="comment">%    CONST.trackLoci.numSpots  : numSpots[j] Array of the max number of loci to fit in channel</span>
0785 <span class="comment">%                              : empty leads to no spots fit.</span>
0786 <span class="comment">%    For example</span>
0787 <span class="comment">%    CONST.trackLoci.numSpots = [3 2] will find:</span>
0788 <span class="comment">%                                     * up to 3 spots in channel 2 (fluor1)</span>
0789 <span class="comment">%                                     * up to 2 spots in channel 3 (fluor2)</span>
0790 <span class="comment">%                                     * 0 spots in subsequent channels</span>
0791 <span class="comment">%</span>
0792 <span class="comment">%    CONST.trackLoci.fluorFlag : Computes statistics of fluorescence image</span>
0793 <span class="comment">%                              : for each cell</span>
0794 <span class="comment">%                              : These include the summed fluor intensity</span>
0795 <span class="comment">%                              : the center of intensity</span>
0796 <span class="comment">%                              : and the second moments of the intensity</span>
0797 <span class="comment">%                              : distribution</span>
0798 <span class="comment">%</span>
0799 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0800 
0801 CONST.trackLoci.gaussR = 1;
0802 
0803 
0804 <span class="keyword">if</span> ResFlag == R60X
0805     CONST.trackLoci.crop = 4;
0806     CONST.trackLoci.numSpots  = [];
0807     CONST.trackLoci.fluorFlag = 1;
0808 <span class="keyword">elseif</span> ResFlag == R100XB
0809     CONST.trackLoci.crop = 2;
0810     CONST.trackLoci.numSpots = [];
0811     CONST.trackLoci.fluorFlag = 0;
0812 <span class="keyword">elseif</span> ResFlag == R100X
0813     CONST.trackLoci.crop = 4;
0814     CONST.trackLoci.numSpots = [];
0815     CONST.trackLoci.fluorFlag = 0;
0816     CONST.trackLoci.gaussR = 1.5;
0817     
0818 <span class="keyword">elseif</span> ResFlag == R100XPa
0819     CONST.trackLoci.crop = 6;
0820     CONST.trackLoci.numSpots = [4];
0821     CONST.trackLoci.fluorFlag = 0;
0822 <span class="keyword">elseif</span> ResFlag == R60XA
0823     CONST.trackLoci.crop = 4;
0824     CONST.trackLoci.numSpots = [];
0825     CONST.trackLoci.fluorFlag = 1;
0826 <span class="keyword">elseif</span> ResFlag == R60XPaM
0827     CONST.trackLoci.crop = 4;
0828     CONST.trackLoci.numSpots = [];
0829     CONST.trackLoci.fluorFlag = 1;
0830 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0831     CONST.trackLoci.crop = 4;
0832     CONST.trackLoci.numSpots = [0,3];
0833     CONST.trackLoci.fluorFlag = 1;
0834 <span class="keyword">elseif</span> ResFlag == R60XBthai
0835     CONST.trackLoci.crop = 4;
0836     CONST.trackLoci.numSpots = [0,3];
0837     CONST.trackLoci.fluorFlag = 1;
0838 <span class="keyword">elseif</span> ResFlag == R60XPa
0839     CONST.trackLoci.crop = 4;
0840     CONST.trackLoci.numSpots = [];
0841     CONST.trackLoci.fluorFlag = 1;
0842 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0843     CONST.trackLoci.crop = 4;
0844     CONST.trackLoci.numSpots = [];
0845     CONST.trackLoci.fluorFlag = 0;
0846 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0847     CONST.trackLoci.crop = 4;
0848     CONST.trackLoci.numSpots = [];
0849     CONST.trackLoci.fluorFlag = 0;
0850 <span class="keyword">end</span>
0851 
0852 
0853 <span class="comment">% Do gating....</span>
0854 <span class="keyword">if</span> ResFlag == R60XA
0855     gate_file_name = <span class="string">'default_gate.mat'</span>;
0856     <span class="keyword">if</span> exist(gate_file_name, <span class="string">'file'</span> );
0857         disp([<span class="string">'loading default gate file: '</span>, gate_file_name] );
0858         tmp = load(gate_file_name);
0859         CONST.trackLoci.gate = tmp.gate;
0860     <span class="keyword">else</span>
0861         CONST.trackLoci.gate = [];
0862     <span class="keyword">end</span>
0863 <span class="keyword">else</span>
0864     CONST.trackLoci.gate = [];
0865 <span class="keyword">end</span>
0866 
0867 <span class="comment">%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0868 <span class="comment">%                                                                         %</span>
0869 <span class="comment">% Constants for getLocusTracks                                            %</span>
0870 <span class="comment">%                                                                         %</span>
0871 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0872 CONST.getLocusTracks.FLUOR1_MIN_SCORE = 1;
0873 CONST.getLocusTracks.FLUOR2_MIN_SCORE = 3;
0874 CONST.getLocusTracks.FLUOR1_REL       = 0.3;
0875 CONST.getLocusTracks.FLUOR2_REL       = 0.3;
0876 CONST.getLocusTracks.TimeStep         = 1;
0877 
0878 <span class="keyword">if</span> ResFlag == R60X
0879     CONST.getLocusTracks.PixelSize        = 6/60;
0880 <span class="keyword">elseif</span> ResFlag == R100XB
0881     CONST.getLocusTracks.PixelSize        = 6/100;
0882 <span class="keyword">elseif</span> ResFlag == R100X
0883     CONST.getLocusTracks.PixelSize        = 6/100;
0884 <span class="keyword">elseif</span> ResFlag == R100XPa
0885     CONST.getLocusTracks.PixelSize        = 6/100;
0886 <span class="keyword">elseif</span> ResFlag == R60XA
0887     CONST.getLocusTracks.PixelSize        = 6/60;
0888 <span class="keyword">elseif</span> ResFlag == R60XPaM
0889     CONST.getLocusTracks.PixelSize        = 6/60;
0890 <span class="keyword">elseif</span> ResFlag == R60XPaM2
0891     CONST.getLocusTracks.PixelSize        = 6/60;
0892 <span class="keyword">elseif</span> ResFlag == R60XBthai
0893     CONST.getLocusTracks.PixelSize        = 6/60;
0894 <span class="keyword">elseif</span> ResFlag == R60XPa
0895     CONST.getLocusTracks.PixelSize        = 6/60;
0896 <span class="keyword">elseif</span> ResFlag == R60XEcHR
0897     CONST.getLocusTracks.PixelSize        = 6/60;
0898 <span class="keyword">elseif</span> ResFlag == R60XEcLB
0899     CONST.getLocusTracks.PixelSize        = 6/60;
0900 <span class="keyword">end</span>
0901 
0902 
0903 <span class="comment">%%</span>
0904 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0905 <span class="comment">%</span>
0906 <span class="comment">% Const for trackOptiView</span>
0907 <span class="comment">%</span>
0908 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0909 
0910 CONST.view.showFullCellCycleOnly = true;
0911 CONST.view.orientFlag            = true;
0912 CONST.view.falseColorFlag        = false;
0913 CONST.view.maxNumCell            = [];
0914 
0915 <span class="comment">% show log fluor reduce variation at high intensity</span>
0916 CONST.view.LogView         = false;
0917 
0918 <span class="keyword">if</span> ResFlag == R60XPaM2
0919     CONST.trackOpti.LogView               = true;
0920 <span class="keyword">end</span>
0921 
0922 <span class="comment">%%</span>
0923 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0924 <span class="comment">%</span>
0925 <span class="comment">% Const for findFocusSR</span>
0926 <span class="comment">%</span>
0927 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0928 CONST.findFocusSR.MAX_FOCUS_NUM = 8;
0929 CONST.findFocusSR.crop          = 4;
0930 CONST.findFocusSR.gaussR        = 1;
0931 CONST.findFocusSR.MAX_TRACE_NUM = 1000;
0932 CONST.findFocusSR.WS_CUT        = 50;
0933 <span class="comment">%CONST.findFocusSR.WS_CUT        = 1000;</span>
0934 
0935 CONST.findFocusSR.MAX_OFF       = 3;
0936 CONST.findFocusSR.I_MIN         = 150;
0937 CONST.findFocusSR.mag           = 16;
0938 CONST.findFocusSR.MIN_TRACE_LEN = 0;
0939 CONST.findFocusSR.R_LINK        = 2;
0940 CONST.findFocusSR.R_LINK        = 2;
0941 
0942 CONST.findFocusSR.SED_WINDOW    = 10;
0943 CONST.findFocusSR.SED_P         = 10;
0944 
0945 CONST.findFocusSR.A_MIN         =  6;
0946 
0947 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0948 <span class="comment">%</span>
0949 <span class="comment">% Const for SR</span>
0950 <span class="comment">%</span>
0951 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0952 CONST.SR.opt =  optimset(<span class="string">'MaxIter'</span>,1000,<span class="string">'Display'</span>,<span class="string">'off'</span>, <span class="string">'TolX'</span>, 1e-8);
0953 
0954 <span class="comment">% Setup CONST calues for image processing</span>
0955 CONST.SR.GausImgFilter_HighPass = fspecial(<span class="string">'gaussian'</span>,141,10);
0956 CONST.SR.GausImgFilter_LowPass3 = fspecial(<span class="string">'gaussian'</span>,21,3);
0957 CONST.SR.GausImgFilter_LowPass2 = fspecial(<span class="string">'gaussian'</span>,21,2);
0958 CONST.SR.GausImgFilter_LowPass1 = fspecial(<span class="string">'gaussian'</span>,7,1.25);
0959 CONST.SR.maxBlinkNum = 2;
0960 <span class="comment">% this is the pad size for cropping regions for fitting</span>
0961 CONST.SR.pad = 8;
0962 CONST.SR.crop = 4;
0963 CONST.SR.Icut = 1000;
0964 
0965 CONST.SR.rcut = 10; <span class="comment">% The maximum distance between frames that two PSFs can be before they are considered two seperate PSFs.</span>
0966 <span class="comment">% If there is more drift than this from one frame to the next they will be considered two seperate PSFs!</span>
0967 
0968 
0969 <span class="comment">% this is the threshold intensity for including locii in analysis measured</span>
0970 <span class="comment">% in std</span>
0971 CONST.SR.Ithresh = 2;
0972 
0973 <span class="comment">%%</span>
0974 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0975 <span class="comment">% close splash</span>
0976 
0977 <span class="comment">%close(h);</span></pre></div>
<hr><address>Generated on Tue 23-Feb-2016 13:44:44 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>